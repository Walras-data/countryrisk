"0",""
"0","### loop das 1000 horas de programação"
"0",""
"0","for(x in unique(base$`ISO2 Code`)){"
"0","   "
"0","testebr <- filter(base, `ISO2 Code` == x)"
"0","testebr$precrisis <- ifelse(testebr$year == ""1996-01-01"",0,testebr$precrisis) "
"0","dummyanos <- testebr$year[testebr$dummy == 1]"
"0","dummynho <- diff(testebr$precrisis) "
"0","dummynho <- c(0,dummynho)"
"0","testebr$dummynho <- dummynho"
"0","inicio <-  testebr$year[testebr$dummynho == 1]"
"0","fim <- testebr$year[testebr$dummynho == -1]"
"0",""
"0","docinho <- (length(inicio)>0)"
"0","  "
"0","grafico <- ggplot() +"
"0","  geom_line(testebr, mapping = aes(x = year,y = pred), color = ""#09557f"", size = 1.25) +"
"0","  {if(docinho)geom_vline(mapping = aes(xintercept = dummyanos), color = ""lightblue"")} +"
"0","  {if(docinho)geom_rect(mapping = aes(xmin = inicio, xmax = fim, ymin = -Inf, ymax = Inf),"
"0","            alpha = 0.2)} +"
"0","  ggtitle(x) + "
"0","  theme_minimal() + "
"0","  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank()) + "
"0","  ylim(0,1) +"
"0","  ylab(""Currency Crisis Probability"")"
"0","  "
"0",""
"0","print(grafico)  "
"0",""
"0",""
"0","}"
